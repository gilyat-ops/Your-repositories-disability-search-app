<!doctype html>
<html lang="he" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>חיפוש + שקלול אחוזי נכות</title>
<style>
body{font-family:Arial,sans-serif;padding:20px;background:#fff;color:#000}
.item{border:1px solid #ddd;padding:12px;border-radius:12px;margin-bottom:10px;display:flex;justify-content:space-between}
.title{font-size:22px;font-weight:900}
.meta{font-size:14px;margin-top:6px}
.meta b{font-weight:800}
.pct{font-size:28px;font-weight:900}
</style>
</head>
<body>

<div id="results"></div>

<script>
const now = () => new Date().toLocaleString("he-IL");

console.log("INDEX_VERSION = FIXED_WITH_CONDITION_ONLY");

async function load(){
  try{
    const res = await fetch("disability_table.json?v=" + Date.now(), {cache:"no-store"});
    const data = await res.json();

    document.getElementById("results").innerHTML = data.map(r => {
      const cond = r.condition ? r.condition : "—";

      return `
      <div class="item">
        <div>
          <div class="title">${r.disease || "—"}</div>
          <div class="meta"><b>מערכת:</b> ${r.system || "—"}</div>
          <div class="meta"><b>תנאי:</b> ${cond}</div>
        </div>
        <div class="pct">${r.percent ? r.percent + "%" : "—"}</div>
      </div>`;
    }).join("");

    console.log("DATA_CONDITION_SAMPLE =", data[0].condition);
  }catch(e){
    console.error("ERROR_LOADING_DATA", e);
  }
}

load();
</script>

</body>
</html>
